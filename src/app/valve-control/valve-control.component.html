<div class="row mb-4">
  <div class="col-xl-6 offset-xl-3 col-lg-8 offset-lg-2 col-md-10 offset-md-1">
    <h2>コントロール</h2>
    <div class="alert alert-info" role="alert" *ngIf="loading; else elseContent">Loading...</div>
    <ng-template #elseContent>
      <div class="container">
        <h3>スイッチ状態</h3>
        <div class="switchToggle">
          <form>
            <input #valveSwitch type="checkbox" id="valveSwitch" name="valveSwich"
                   [ngModel]="state" (change)="updateCtrl(valveSwitch.checked)" />
            <label for="valveSwitch"></label>
          </form>
        </div>
      </div>
      <div class="container">
        <h3>水量 <small>(L/min)</small></h3>
        <div class="progress" style="height: 30px">
          <div class="progress-bar bg-success" role="progressbar" [style.width]="(flow/FLOW_MAX) | percent: '1.2-2'"
               [attr.aria-valuenow]="flow" aria-valuemin="0"
               [attr.aria-valuemax]="FLOW_MAX" id="waterFlow">
            <div class="pl-2">{{flow | number:'1.1-1' }}</div>
          </div>
        </div>
        <div class="alert alert-danger mt-3" role="alert" *ngIf="error['ctrl'] || error['flow']">
          <p class="mb-0" *ngIf="error['ctrl']">制御に失敗しました。</p>
          <p class="mb-0" *ngIf="error['flow']">流量の取得に失敗しました。</p>
        </div>
      </div>
    </ng-template>
  </div>
</div>
